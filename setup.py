import os

# Dictionary containing file paths and their contents
FILES = {
    "mvnw": "#!/bin/sh\n# ----------------------------------------------------------------------------\n# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing,\n# software distributed under the License is distributed on an\n# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n# KIND, either express or implied.  See the License for the\n# specific language governing permissions and limitations\n# under the License.\n# ----------------------------------------------------------------------------\n\n# ----------------------------------------------------------------------------\n# Apache Maven Wrapper startup batch script, version 3.3.4\n#\n# Optional ENV vars\n# -----------------\n#   JAVA_HOME - location of a JDK home dir, required when download maven via java source\n#   MVNW_REPOURL - repo url base for downloading maven distribution\n#   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n#   MVNW_VERBOSE - true: enable verbose log; debug: trace the mvnw script; others: silence the output\n# ----------------------------------------------------------------------------\n\nset -euf\n[ \"${MVNW_VERBOSE-}\" != debug ] || set -x\n\n# OS specific support.\nnative_path() { printf %s\\\\n \"$1\"; }\ncase \"$(uname)\" in\nCYGWIN* | MINGW*)\n  [ -z \"${JAVA_HOME-}\" ] || JAVA_HOME=\"$(cygpath --unix \"$JAVA_HOME\")\"\n  native_path() { cygpath --path --windows \"$1\"; }\n  ;;\nesac\n\n# set JAVACMD and JAVACCMD\nset_java_home() {\n  # For Cygwin and MinGW, ensure paths are in Unix format before anything is touched\n  if [ -n \"${JAVA_HOME-}\" ]; then\n    if [ -x \"$JAVA_HOME/jre/sh/java\" ]; then\n      # IBM's JDK on AIX uses strange locations for the executables\n      JAVACMD=\"$JAVA_HOME/jre/sh/java\"\n      JAVACCMD=\"$JAVA_HOME/jre/sh/javac\"\n    else\n      JAVACMD=\"$JAVA_HOME/bin/java\"\n      JAVACCMD=\"$JAVA_HOME/bin/javac\"\n\n      if [ ! -x \"$JAVACMD\" ] || [ ! -x \"$JAVACCMD\" ]; then\n        echo \"The JAVA_HOME environment variable is not defined correctly, so mvnw cannot run.\" >&2\n        echo \"JAVA_HOME is set to \\\"$JAVA_HOME\\\", but \\\"\\$JAVA_HOME/bin/java\\\" or \\\"\\$JAVA_HOME/bin/javac\\\" does not exist.\" >&2\n        return 1\n      fi\n    fi\n  else\n    JAVACMD=\"$(\n      'set' +e\n      'unset' -f command 2>/dev/null\n      'command' -v java\n    )\" || :\n    JAVACCMD=\"$(\n      'set' +e\n      'unset' -f command 2>/dev/null\n      'command' -v javac\n    )\" || :\n\n    if [ ! -x \"${JAVACMD-}\" ] || [ ! -x \"${JAVACCMD-}\" ]; then\n      echo \"The java/javac command does not exist in PATH nor is JAVA_HOME set, so mvnw cannot run.\" >&2\n      return 1\n    fi\n  fi\n}\n\n# hash string like Java String::hashCode\nhash_string() {\n  str=\"${1:-}\" h=0\n  while [ -n \"$str\" ]; do\n    char=\"${str%\"${str#?}\"}\"\n    h=$(((h * 31 + $(LC_CTYPE=C printf %d \"'$char\")) % 4294967296))\n    str=\"${str#?}\"\n  done\n  printf %x\\\\n $h\n}\n\nverbose() { :; }\n[ \"${MVNW_VERBOSE-}\" != true ] || verbose() { printf %s\\\\n \"${1-}\"; }\n\ndie() {\n  printf %s\\\\n \"$1\" >&2\n  exit 1\n}\n\ntrim() {\n  # MWRAPPER-139:\n  #   Trims trailing and leading whitespace, carriage returns, tabs, and linefeeds.\n  #   Needed for removing poorly interpreted newline sequences when running in more\n  #   exotic environments such as mingw bash on Windows.\n  printf \"%s\" \"${1}\" | tr -d '[:space:]'\n}\n\nscriptDir=\"$(dirname \"$0\")\"\nscriptName=\"$(basename \"$0\")\"\n\n# parse distributionUrl and optional distributionSha256Sum, requires .mvn/wrapper/maven-wrapper.properties\nwhile IFS=\"=\" read -r key value; do\n  case \"${key-}\" in\n  distributionUrl) distributionUrl=$(trim \"${value-}\") ;;\n  distributionSha256Sum) distributionSha256Sum=$(trim \"${value-}\") ;;\n  esac\ndone <\"$scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n[ -n \"${distributionUrl-}\" ] || die \"cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n\ncase \"${distributionUrl##*/}\" in\nmaven-mvnd-*bin.*)\n  MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/\n  case \"${PROCESSOR_ARCHITECTURE-}${PROCESSOR_ARCHITEW6432-}:$(uname -a)\" in\n  *AMD64:CYGWIN* | *AMD64:MINGW*) distributionPlatform=windows-amd64 ;;\n  :Darwin*x86_64) distributionPlatform=darwin-amd64 ;;\n  :Darwin*arm64) distributionPlatform=darwin-aarch64 ;;\n  :Linux*x86_64*) distributionPlatform=linux-amd64 ;;\n  *)\n    echo \"Cannot detect native platform for mvnd on $(uname)-$(uname -m), use pure java version\" >&2\n    distributionPlatform=linux-amd64\n    ;;\n  esac\n  distributionUrl=\"${distributionUrl%-bin.*}-$distributionPlatform.zip\"\n  ;;\nmaven-mvnd-*) MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/ ;;\n*) MVN_CMD=\"mvn${scriptName#mvnw}\" _MVNW_REPO_PATTERN=/org/apache/maven/ ;;\nesac\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\n[ -z \"${MVNW_REPOURL-}\" ] || distributionUrl=\"$MVNW_REPOURL$_MVNW_REPO_PATTERN${distributionUrl#*\"$_MVNW_REPO_PATTERN\"}\"\ndistributionUrlName=\"${distributionUrl##*/}\"\ndistributionUrlNameMain=\"${distributionUrlName%.*}\"\ndistributionUrlNameMain=\"${distributionUrlNameMain%-bin}\"\nMAVEN_USER_HOME=\"${MAVEN_USER_HOME:-${HOME}/.m2}\"\nMAVEN_HOME=\"${MAVEN_USER_HOME}/wrapper/dists/${distributionUrlNameMain-}/$(hash_string \"$distributionUrl\")\"\n\nexec_maven() {\n  unset MVNW_VERBOSE MVNW_USERNAME MVNW_PASSWORD MVNW_REPOURL || :\n  exec \"$MAVEN_HOME/bin/$MVN_CMD\" \"$@\" || die \"cannot exec $MAVEN_HOME/bin/$MVN_CMD\"\n}\n\nif [ -d \"$MAVEN_HOME\" ]; then\n  verbose \"found existing MAVEN_HOME at $MAVEN_HOME\"\n  exec_maven \"$@\"\nfi\n\ncase \"${distributionUrl-}\" in\n*?-bin.zip | *?maven-mvnd-?*-?*.zip) ;;\n*) die \"distributionUrl is not valid, must match *-bin.zip or maven-mvnd-*.zip, but found '${distributionUrl-}'\" ;;\nesac\n\n# prepare tmp dir\nif TMP_DOWNLOAD_DIR=\"$(mktemp -d)\" && [ -d \"$TMP_DOWNLOAD_DIR\" ]; then\n  clean() { rm -rf -- \"$TMP_DOWNLOAD_DIR\"; }\n  trap clean HUP INT TERM EXIT\nelse\n  die \"cannot create temp dir\"\nfi\n\nmkdir -p -- \"${MAVEN_HOME%/*}\"\n\n# Download and Install Apache Maven\nverbose \"Couldn't find MAVEN_HOME, downloading and installing it ...\"\nverbose \"Downloading from: $distributionUrl\"\nverbose \"Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName\"\n\n# select .zip or .tar.gz\nif ! command -v unzip >/dev/null; then\n  distributionUrl=\"${distributionUrl%.zip}.tar.gz\"\n  distributionUrlName=\"${distributionUrl##*/}\"\nfi\n\n# verbose opt\n__MVNW_QUIET_WGET=--quiet __MVNW_QUIET_CURL=--silent __MVNW_QUIET_UNZIP=-q __MVNW_QUIET_TAR=''\n[ \"${MVNW_VERBOSE-}\" != true ] || __MVNW_QUIET_WGET='' __MVNW_QUIET_CURL='' __MVNW_QUIET_UNZIP='' __MVNW_QUIET_TAR=v\n\n# normalize http auth\ncase \"${MVNW_PASSWORD:+has-password}\" in\n'') MVNW_USERNAME='' MVNW_PASSWORD='' ;;\nhas-password) [ -n \"${MVNW_USERNAME-}\" ] || MVNW_USERNAME='' MVNW_PASSWORD='' ;;\nesac\n\nif [ -z \"${MVNW_USERNAME-}\" ] && command -v wget >/dev/null; then\n  verbose \"Found wget ... using wget\"\n  wget ${__MVNW_QUIET_WGET:+\"$__MVNW_QUIET_WGET\"} \"$distributionUrl\" -O \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" || die \"wget: Failed to fetch $distributionUrl\"\nelif [ -z \"${MVNW_USERNAME-}\" ] && command -v curl >/dev/null; then\n  verbose \"Found curl ... using curl\"\n  curl ${__MVNW_QUIET_CURL:+\"$__MVNW_QUIET_CURL\"} -f -L -o \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" \"$distributionUrl\" || die \"curl: Failed to fetch $distributionUrl\"\nelif set_java_home; then\n  verbose \"Falling back to use Java to download\"\n  javaSource=\"$TMP_DOWNLOAD_DIR/Downloader.java\"\n  targetZip=\"$TMP_DOWNLOAD_DIR/$distributionUrlName\"\n  cat >\"$javaSource\" <<-END\n\tpublic class Downloader extends java.net.Authenticator\n\t{\n\t  protected java.net.PasswordAuthentication getPasswordAuthentication()\n\t  {\n\t    return new java.net.PasswordAuthentication( System.getenv( \"MVNW_USERNAME\" ), System.getenv( \"MVNW_PASSWORD\" ).toCharArray() );\n\t  }\n\t  public static void main( String[] args ) throws Exception\n\t  {\n\t    setDefault( new Downloader() );\n\t    java.nio.file.Files.copy( java.net.URI.create( args[0] ).toURL().openStream(), java.nio.file.Paths.get( args[1] ).toAbsolutePath().normalize() );\n\t  }\n\t}\n\tEND\n  # For Cygwin/MinGW, switch paths to Windows format before running javac and java\n  verbose \" - Compiling Downloader.java ...\"\n  \"$(native_path \"$JAVACCMD\")\" \"$(native_path \"$javaSource\")\" || die \"Failed to compile Downloader.java\"\n  verbose \" - Running Downloader.java ...\"\n  \"$(native_path \"$JAVACMD\")\" -cp \"$(native_path \"$TMP_DOWNLOAD_DIR\")\" Downloader \"$distributionUrl\" \"$(native_path \"$targetZip\")\"\nfi\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\nif [ -n \"${distributionSha256Sum-}\" ]; then\n  distributionSha256Result=false\n  if [ \"$MVN_CMD\" = mvnd.sh ]; then\n    echo \"Checksum validation is not supported for maven-mvnd.\" >&2\n    echo \"Please disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\" >&2\n    exit 1\n  elif command -v sha256sum >/dev/null; then\n    if echo \"$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName\" | sha256sum -c - >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  elif command -v shasum >/dev/null; then\n    if echo \"$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName\" | shasum -a 256 -c >/dev/null 2>&1; then\n      distributionSha256Result=true\n    fi\n  else\n    echo \"Checksum validation was requested but neither 'sha256sum' or 'shasum' are available.\" >&2\n    echo \"Please install either command, or disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\" >&2\n    exit 1\n  fi\n  if [ $distributionSha256Result = false ]; then\n    echo \"Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised.\" >&2\n    echo \"If you updated your Maven version, you need to update the specified distributionSha256Sum property.\" >&2\n    exit 1\n  fi\nfi\n\n# unzip and move\nif command -v unzip >/dev/null; then\n  unzip ${__MVNW_QUIET_UNZIP:+\"$__MVNW_QUIET_UNZIP\"} \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -d \"$TMP_DOWNLOAD_DIR\" || die \"failed to unzip\"\nelse\n  tar xzf${__MVNW_QUIET_TAR:+\"$__MVNW_QUIET_TAR\"} \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -C \"$TMP_DOWNLOAD_DIR\" || die \"failed to untar\"\nfi\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\nactualDistributionDir=\"\"\n\n# First try the expected directory name (for regular distributions)\nif [ -d \"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain\" ]; then\n  if [ -f \"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain/bin/$MVN_CMD\" ]; then\n    actualDistributionDir=\"$distributionUrlNameMain\"\n  fi\nfi\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif [ -z \"$actualDistributionDir\" ]; then\n  # enable globbing to iterate over items\n  set +f\n  for dir in \"$TMP_DOWNLOAD_DIR\"/*; do\n    if [ -d \"$dir\" ]; then\n      if [ -f \"$dir/bin/$MVN_CMD\" ]; then\n        actualDistributionDir=\"$(basename \"$dir\")\"\n        break\n      fi\n    fi\n  done\n  set -f\nfi\n\nif [ -z \"$actualDistributionDir\" ]; then\n  verbose \"Contents of $TMP_DOWNLOAD_DIR:\"\n  verbose \"$(ls -la \"$TMP_DOWNLOAD_DIR\")\"\n  die \"Could not find Maven distribution directory in extracted archive\"\nfi\n\nverbose \"Found extracted Maven distribution directory: $actualDistributionDir\"\nprintf %s\\\\n \"$distributionUrl\" >\"$TMP_DOWNLOAD_DIR/$actualDistributionDir/mvnw.url\"\nmv -- \"$TMP_DOWNLOAD_DIR/$actualDistributionDir\" \"$MAVEN_HOME\" || [ -d \"$MAVEN_HOME\" ] || die \"fail to move MAVEN_HOME\"\n\nclean || :\nexec_maven \"$@\"\n",
    "pom.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.2.1</version>\n\t\t<relativePath/> <!-- lookup parent from repository -->\n\t</parent>\n\t<groupId>com.example</groupId>\n\t<artifactId>demo</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>demo</name>\n\t<description>Demo project for Spring Boot</description>\n\t<url/>\n\t<licenses>\n\t\t<license/>\n\t</licenses>\n\t<developers>\n\t\t<developer/>\n\t</developers>\n\t<scm>\n\t\t<connection/>\n\t\t<developerConnection/>\n\t\t<tag/>\n\t\t<url/>\n\t</scm>\n\t<properties>\n\t\t<java.version>17</java.version>\n\t</properties>\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-security</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-validation</artifactId>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>com.mysql</groupId>\n\t\t\t<artifactId>mysql-connector-j</artifactId>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t\n\t\t<!-- JWT -->\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-api</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-impl</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-jackson</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-tomcat</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.security</groupId>\n\t\t\t<artifactId>spring-security-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<!-- TestNG Dependency -->\n\t\t<dependency>\n\t\t\t<groupId>org.testng</groupId>\n\t\t\t<artifactId>testng</artifactId>\n\t\t\t<version>7.7.0</version>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springdoc</groupId>\n\t\t\t<artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n\t\t\t<version>2.3.0</version>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t</plugin>\n\t\t\t<!-- Configure Maven Surefire Plugin to use TestNG -->\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.apache.maven.plugins</groupId>\n\t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n\t\t\t\t<version>3.1.2</version>\n\t\t\t\t<configuration>\n\t\t\t\t\t<argLine>-Dnet.bytebuddy.experimental=true</argLine>\n\t\t\t\t</configuration>\n\t\t\t\t<dependencies>\n\t\t\t\t\t<dependency>\n\t\t\t\t\t\t<groupId>org.apache.maven.surefire</groupId>\n\t\t\t\t\t\t<artifactId>surefire-testng</artifactId>\n\t\t\t\t\t\t<version>3.1.2</version>\n\t\t\t\t\t</dependency>\n\t\t\t\t</dependencies>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\n</project>",
    ".gitignore": "HELP.md\ntarget/\n.mvn/wrapper/maven-wrapper.jar\n!**/src/main/**/target/\n!**/src/test/**/target/\n\n### STS ###\n.apt_generated\n.classpath\n.factorypath\n.project\n.settings\n.springBeans\n.sts4-cache\n\n### IntelliJ IDEA ###\n.idea\n*.iws\n*.iml\n*.ipr\n\n### NetBeans ###\n/nbproject/private/\n/nbbuild/\n/dist/\n/nbdist/\n/.nb-gradle/\nbuild/\n!**/src/main/**/build/\n!**/src/test/**/build/\n\n### VS Code ###\n.vscode/\n",
    ".gitattributes": "/mvnw text eol=lf\n*.cmd text eol=crlf\n",
    "packer.py": "import os\nimport json\n\n# The name of the script that will be generated\noutput_script = \"setup_project_auto.py\"\n\ndef get_project_files(root_dir):\n    file_data = {}\n    # Walk through the directory\n    for root, dirs, files in os.walk(root_dir):\n        # Exclude unnecessary directories\n        if 'target' in dirs:\n            dirs.remove('target')\n        if '.git' in dirs:\n            dirs.remove('.git')\n        if '.mvn' in dirs:\n            dirs.remove('.mvn')\n        if '.idea' in dirs:\n            dirs.remove('.idea')\n        \n        for file in files:\n            # Exclude this script and the output script\n            if file in [output_script, 'project_packer.py', 'setup_project.py']:\n                continue\n            # Exclude binary or unnecessary files\n            if file.endswith(('.class', '.jar', '.log', '.DS_Store')):\n                continue\n            \n            path = os.path.join(root, file)\n            # Get relative path to use as key\n            rel_path = os.path.relpath(path, root_dir)\n            # Normalize path separators for cross-platform compatibility\n            rel_path = rel_path.replace('\\\\', '/')\n            \n            try:\n                with open(path, 'r', encoding='utf-8') as f:\n                    content = f.read()\n                file_data[rel_path] = content\n            except Exception as e:\n                print(f\"Skipping binary or unreadable file {rel_path}: {e}\")\n\n    return file_data\n\ndef generate_installer(file_data):\n    # Create the content of the new script\n    script_content = f'''import os\n\n# Dictionary containing file paths and their contents\nFILES = {json.dumps(file_data, indent=4)}\n\ndef recreate_project():\n    print(\"Starting project recreation...\")\n    for file_path, content in FILES.items():\n        # Handle path separators for the current OS\n        file_path = os.path.normpath(file_path)\n        dir_name = os.path.dirname(file_path)\n        \n        if dir_name:\n            os.makedirs(dir_name, exist_ok=True)\n        \n        try:\n            with open(file_path, 'w', encoding='utf-8') as f:\n                f.write(content)\n            print(f\"Created: {{file_path}}\")\n        except Exception as e:\n            print(f\"Error creating {{file_path}}: {{e}}\")\n            \n    print(\"-\" * 50)\n    print(\"Project recreated successfully!\")\n\nif __name__ == \"__main__\":\n    recreate_project()\n'''\n    \n    # Write the generated script to disk\n    with open(output_script, 'w', encoding='utf-8') as f:\n        f.write(script_content)\n    print(f\"Successfully generated restoration script: {output_script}\")\n\nif __name__ == \"__main__\":\n    current_dir = os.getcwd()\n    print(f\"Scanning directory: {current_dir}\")\n    data = get_project_files(current_dir)\n    generate_installer(data)\n",
    "mvnw.cmd": "<# : batch portion\n@REM ----------------------------------------------------------------------------\n@REM Licensed to the Apache Software Foundation (ASF) under one\n@REM or more contributor license agreements.  See the NOTICE file\n@REM distributed with this work for additional information\n@REM regarding copyright ownership.  The ASF licenses this file\n@REM to you under the Apache License, Version 2.0 (the\n@REM \"License\"); you may not use this file except in compliance\n@REM with the License.  You may obtain a copy of the License at\n@REM\n@REM    http://www.apache.org/licenses/LICENSE-2.0\n@REM\n@REM Unless required by applicable law or agreed to in writing,\n@REM software distributed under the License is distributed on an\n@REM \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n@REM KIND, either express or implied.  See the License for the\n@REM specific language governing permissions and limitations\n@REM under the License.\n@REM ----------------------------------------------------------------------------\n\n@REM ----------------------------------------------------------------------------\n@REM Apache Maven Wrapper startup batch script, version 3.3.4\n@REM\n@REM Optional ENV vars\n@REM   MVNW_REPOURL - repo url base for downloading maven distribution\n@REM   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven\n@REM   MVNW_VERBOSE - true: enable verbose log; others: silence the output\n@REM ----------------------------------------------------------------------------\n\n@IF \"%__MVNW_ARG0_NAME__%\"==\"\" (SET __MVNW_ARG0_NAME__=%~nx0)\n@SET __MVNW_CMD__=\n@SET __MVNW_ERROR__=\n@SET __MVNW_PSMODULEP_SAVE=%PSModulePath%\n@SET PSModulePath=\n@FOR /F \"usebackq tokens=1* delims==\" %%A IN (`powershell -noprofile \"& {$scriptDir='%~dp0'; $script='%__MVNW_ARG0_NAME__%'; icm -ScriptBlock ([Scriptblock]::Create((Get-Content -Raw '%~f0'))) -NoNewScope}\"`) DO @(\n  IF \"%%A\"==\"MVN_CMD\" (set __MVNW_CMD__=%%B) ELSE IF \"%%B\"==\"\" (echo %%A) ELSE (echo %%A=%%B)\n)\n@SET PSModulePath=%__MVNW_PSMODULEP_SAVE%\n@SET __MVNW_PSMODULEP_SAVE=\n@SET __MVNW_ARG0_NAME__=\n@SET MVNW_USERNAME=\n@SET MVNW_PASSWORD=\n@IF NOT \"%__MVNW_CMD__%\"==\"\" (\"%__MVNW_CMD__%\" %*)\n@echo Cannot start maven from wrapper >&2 && exit /b 1\n@GOTO :EOF\n: end batch / begin powershell #>\n\n$ErrorActionPreference = \"Stop\"\nif ($env:MVNW_VERBOSE -eq \"true\") {\n  $VerbosePreference = \"Continue\"\n}\n\n# calculate distributionUrl, requires .mvn/wrapper/maven-wrapper.properties\n$distributionUrl = (Get-Content -Raw \"$scriptDir/.mvn/wrapper/maven-wrapper.properties\" | ConvertFrom-StringData).distributionUrl\nif (!$distributionUrl) {\n  Write-Error \"cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties\"\n}\n\nswitch -wildcard -casesensitive ( $($distributionUrl -replace '^.*/','') ) {\n  \"maven-mvnd-*\" {\n    $USE_MVND = $true\n    $distributionUrl = $distributionUrl -replace '-bin\\.[^.]*$',\"-windows-amd64.zip\"\n    $MVN_CMD = \"mvnd.cmd\"\n    break\n  }\n  default {\n    $USE_MVND = $false\n    $MVN_CMD = $script -replace '^mvnw','mvn'\n    break\n  }\n}\n\n# apply MVNW_REPOURL and calculate MAVEN_HOME\n# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>\nif ($env:MVNW_REPOURL) {\n  $MVNW_REPO_PATTERN = if ($USE_MVND -eq $False) { \"/org/apache/maven/\" } else { \"/maven/mvnd/\" }\n  $distributionUrl = \"$env:MVNW_REPOURL$MVNW_REPO_PATTERN$($distributionUrl -replace \"^.*$MVNW_REPO_PATTERN\",'')\"\n}\n$distributionUrlName = $distributionUrl -replace '^.*/',''\n$distributionUrlNameMain = $distributionUrlName -replace '\\.[^.]*$','' -replace '-bin$',''\n\n$MAVEN_M2_PATH = \"$HOME/.m2\"\nif ($env:MAVEN_USER_HOME) {\n  $MAVEN_M2_PATH = \"$env:MAVEN_USER_HOME\"\n}\n\nif (-not (Test-Path -Path $MAVEN_M2_PATH)) {\n    New-Item -Path $MAVEN_M2_PATH -ItemType Directory | Out-Null\n}\n\n$MAVEN_WRAPPER_DISTS = $null\nif ((Get-Item $MAVEN_M2_PATH).Target[0] -eq $null) {\n  $MAVEN_WRAPPER_DISTS = \"$MAVEN_M2_PATH/wrapper/dists\"\n} else {\n  $MAVEN_WRAPPER_DISTS = (Get-Item $MAVEN_M2_PATH).Target[0] + \"/wrapper/dists\"\n}\n\n$MAVEN_HOME_PARENT = \"$MAVEN_WRAPPER_DISTS/$distributionUrlNameMain\"\n$MAVEN_HOME_NAME = ([System.Security.Cryptography.SHA256]::Create().ComputeHash([byte[]][char[]]$distributionUrl) | ForEach-Object {$_.ToString(\"x2\")}) -join ''\n$MAVEN_HOME = \"$MAVEN_HOME_PARENT/$MAVEN_HOME_NAME\"\n\nif (Test-Path -Path \"$MAVEN_HOME\" -PathType Container) {\n  Write-Verbose \"found existing MAVEN_HOME at $MAVEN_HOME\"\n  Write-Output \"MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD\"\n  exit $?\n}\n\nif (! $distributionUrlNameMain -or ($distributionUrlName -eq $distributionUrlNameMain)) {\n  Write-Error \"distributionUrl is not valid, must end with *-bin.zip, but found $distributionUrl\"\n}\n\n# prepare tmp dir\n$TMP_DOWNLOAD_DIR_HOLDER = New-TemporaryFile\n$TMP_DOWNLOAD_DIR = New-Item -Itemtype Directory -Path \"$TMP_DOWNLOAD_DIR_HOLDER.dir\"\n$TMP_DOWNLOAD_DIR_HOLDER.Delete() | Out-Null\ntrap {\n  if ($TMP_DOWNLOAD_DIR.Exists) {\n    try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n    catch { Write-Warning \"Cannot remove $TMP_DOWNLOAD_DIR\" }\n  }\n}\n\nNew-Item -Itemtype Directory -Path \"$MAVEN_HOME_PARENT\" -Force | Out-Null\n\n# Download and Install Apache Maven\nWrite-Verbose \"Couldn't find MAVEN_HOME, downloading and installing it ...\"\nWrite-Verbose \"Downloading from: $distributionUrl\"\nWrite-Verbose \"Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName\"\n\n$webclient = New-Object System.Net.WebClient\nif ($env:MVNW_USERNAME -and $env:MVNW_PASSWORD) {\n  $webclient.Credentials = New-Object System.Net.NetworkCredential($env:MVNW_USERNAME, $env:MVNW_PASSWORD)\n}\n[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n$webclient.DownloadFile($distributionUrl, \"$TMP_DOWNLOAD_DIR/$distributionUrlName\") | Out-Null\n\n# If specified, validate the SHA-256 sum of the Maven distribution zip file\n$distributionSha256Sum = (Get-Content -Raw \"$scriptDir/.mvn/wrapper/maven-wrapper.properties\" | ConvertFrom-StringData).distributionSha256Sum\nif ($distributionSha256Sum) {\n  if ($USE_MVND) {\n    Write-Error \"Checksum validation is not supported for maven-mvnd. `nPlease disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties.\"\n  }\n  Import-Module $PSHOME\\Modules\\Microsoft.PowerShell.Utility -Function Get-FileHash\n  if ((Get-FileHash \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -Algorithm SHA256).Hash.ToLower() -ne $distributionSha256Sum) {\n    Write-Error \"Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised. If you updated your Maven version, you need to update the specified distributionSha256Sum property.\"\n  }\n}\n\n# unzip and move\nExpand-Archive \"$TMP_DOWNLOAD_DIR/$distributionUrlName\" -DestinationPath \"$TMP_DOWNLOAD_DIR\" | Out-Null\n\n# Find the actual extracted directory name (handles snapshots where filename != directory name)\n$actualDistributionDir = \"\"\n\n# First try the expected directory name (for regular distributions)\n$expectedPath = Join-Path \"$TMP_DOWNLOAD_DIR\" \"$distributionUrlNameMain\"\n$expectedMvnPath = Join-Path \"$expectedPath\" \"bin/$MVN_CMD\"\nif ((Test-Path -Path $expectedPath -PathType Container) -and (Test-Path -Path $expectedMvnPath -PathType Leaf)) {\n  $actualDistributionDir = $distributionUrlNameMain\n}\n\n# If not found, search for any directory with the Maven executable (for snapshots)\nif (!$actualDistributionDir) {\n  Get-ChildItem -Path \"$TMP_DOWNLOAD_DIR\" -Directory | ForEach-Object {\n    $testPath = Join-Path $_.FullName \"bin/$MVN_CMD\"\n    if (Test-Path -Path $testPath -PathType Leaf) {\n      $actualDistributionDir = $_.Name\n    }\n  }\n}\n\nif (!$actualDistributionDir) {\n  Write-Error \"Could not find Maven distribution directory in extracted archive\"\n}\n\nWrite-Verbose \"Found extracted Maven distribution directory: $actualDistributionDir\"\nRename-Item -Path \"$TMP_DOWNLOAD_DIR/$actualDistributionDir\" -NewName $MAVEN_HOME_NAME | Out-Null\ntry {\n  Move-Item -Path \"$TMP_DOWNLOAD_DIR/$MAVEN_HOME_NAME\" -Destination $MAVEN_HOME_PARENT | Out-Null\n} catch {\n  if (! (Test-Path -Path \"$MAVEN_HOME\" -PathType Container)) {\n    Write-Error \"fail to move MAVEN_HOME\"\n  }\n} finally {\n  try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }\n  catch { Write-Warning \"Cannot remove $TMP_DOWNLOAD_DIR\" }\n}\n\nWrite-Output \"MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD\"\n",
    "src/main/resources/application.properties": "spring.application.name=demo\nserver.port=9001\nspring.datasource.url=jdbc:mysql://localhost:3306/demo_db?createDatabaseIfNotExist=true&useSSL=false\nspring.datasource.username=root\nspring.datasource.password=Amypo\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n\n# JWT\napp.jwtSecret=nrjj2ocWoXNMwg4kkrBWQyoK9nNKy9vYLIiLCwn5jJxJIb6Wm/6VGTO6Dfs1MeA2zPxapDh2AcQYHENlKtav5Q==\napp.jwtExpirationInMs=604800000\n\nspringdoc.api-docs.path=/v3/api-docs\nspringdoc.swagger-ui.path=/swagger-ui.html\n",
    "src/main/java/com/example/demo/DemoApplication.java": "package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.servlet.ServletComponentScan;\n\n@SpringBootApplication\n@ServletComponentScan\npublic class DemoApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n\n}",
    "src/main/java/com/example/demo/security/JwtTokenProvider.java": "package com.example.demo.security;\n\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.security.Keys;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Component;\n\nimport java.security.Key;\nimport java.util.Date;\nimport java.nio.charset.StandardCharsets;\n\n@Component\npublic class JwtTokenProvider {\n\n    @Value(\"${app.jwtSecret}\")\n    private String jwtSecret;\n\n    @Value(\"${app.jwtExpirationInMs}\")\n    private long jwtExpirationInMs;\n\n    public JwtTokenProvider() {\n    }\n\n    public JwtTokenProvider(String jwtSecret, long jwtExpirationInMs) {\n        this.jwtSecret = jwtSecret;\n        this.jwtExpirationInMs = jwtExpirationInMs;\n    }\n\n    private Key getSigningKey() {\n        byte[] keyBytes = jwtSecret.getBytes(StandardCharsets.UTF_8);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n\n    public String generateToken(Authentication authentication) {\n        UserDetails userPrincipal = (UserDetails) authentication.getPrincipal();\n        return generateToken(authentication, null, userPrincipal.getUsername(), null);\n    }\n\n    public String generateToken(Authentication authentication, Long userId, String email, String role) {\n        Date now = new Date();\n        Date expiryDate = new Date(now.getTime() + jwtExpirationInMs);\n\n        JwtBuilder builder = Jwts.builder()\n                .setSubject(userId != null ? String.valueOf(userId) : email)\n                .setIssuedAt(new Date())\n                .setExpiration(expiryDate)\n                .signWith(getSigningKey(), SignatureAlgorithm.HS256);\n        \n        if (email != null) {\n            builder.claim(\"email\", email);\n        }\n        if (role != null) {\n            builder.claim(\"role\", role);\n        }\n\n        return builder.compact();\n    }\n\n    public String getUserUsernameFromJWT(String token) {\n        return getClaims(token).getSubject();\n    }\n    \n    public Long getUserIdFromToken(String token) {\n        String subject = getClaims(token).getSubject();\n        try {\n            return Long.parseLong(subject);\n        } catch (NumberFormatException e) {\n            return null;\n        }\n    }\n\n    public String getEmailFromToken(String token) {\n        return getClaims(token).get(\"email\", String.class);\n    }\n\n    public String getRoleFromToken(String token) {\n        return getClaims(token).get(\"role\", String.class);\n    }\n\n    private Claims getClaims(String token) {\n        return Jwts.parserBuilder()\n                .setSigningKey(getSigningKey())\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n    }\n\n    public boolean validateToken(String authToken) {\n        try {\n            Jwts.parserBuilder().setSigningKey(getSigningKey()).build().parseClaimsJws(authToken);\n            return true;\n        } catch (JwtException | IllegalArgumentException ex) {\n            // Log exception\n        }\n        return false;\n    }\n}",
    "src/main/java/com/example/demo/security/CustomUserDetailsService.java": "package com.example.demo.security;\n\nimport com.example.demo.model.User;\nimport com.example.demo.repository.UserRepository;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.stereotype.Service;\nimport java.util.Collections;\n\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n        User user = userRepository.findByEmail(email)\n                .orElseThrow(() -> new UsernameNotFoundException(\"User not found with email: \" + email));\n\n        return new org.springframework.security.core.userdetails.User(\n                user.getEmail(),\n                user.getPassword(),\n                Collections.singletonList(new SimpleGrantedAuthority(\"ROLE_\" + user.getRole()))\n        );\n    }\n}\n",
    "src/main/java/com/example/demo/security/JwtAuthenticationFilter.java": "package com.example.demo.security;\n\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport org.springframework.util.StringUtils;\n\nimport java.io.IOException;\n\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private JwtTokenProvider tokenProvider;\n\n    @Autowired\n    private CustomUserDetailsService customUserDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        String jwt = getJwtFromRequest(request);\n\n        if (StringUtils.hasText(jwt) && tokenProvider.validateToken(jwt)) {\n            String username = tokenProvider.getUserUsernameFromJWT(jwt);\n\n            UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                    userDetails, null, userDetails.getAuthorities());\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String getJwtFromRequest(HttpServletRequest request) {\n        String bearerToken = request.getHeader(\"Authorization\");\n        if (StringUtils.hasText(bearerToken) && bearerToken.startsWith(\"Bearer \")) {\n            return bearerToken.substring(7);\n        }\n        return null;\n    }\n}\n",
    "src/main/java/com/example/demo/repository/UserRepository.java": "package com.example.demo.repository;\n\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends JpaRepository<User, Long> {\n    boolean existsByEmail(String email);\n    // Needed for Auth\n    java.util.Optional<User> findByEmail(String email);\n}\n",
    "src/main/java/com/example/demo/repository/BudgetSummaryRepository.java": "package com.example.demo.repository;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.BudgetSummary;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.Optional;\n\n@Repository\npublic interface BudgetSummaryRepository extends JpaRepository<BudgetSummary, Long> {\n    Optional<BudgetSummary> findByBudgetPlan(BudgetPlan plan);\n}\n",
    "src/main/java/com/example/demo/repository/CategoryRepository.java": "package com.example.demo.repository;\n\nimport com.example.demo.model.Category;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.List;\n\n@Repository\npublic interface CategoryRepository extends JpaRepository<Category, Long> {\n    boolean existsByName(String name);\n    List<Category> findAll();\n}\n",
    "src/main/java/com/example/demo/repository/BudgetPlanRepository.java": "package com.example.demo.repository;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.Optional;\n\n@Repository\npublic interface BudgetPlanRepository extends JpaRepository<BudgetPlan, Long> {\n    Optional<BudgetPlan> findByUserAndMonthAndYear(User user, Integer month, Integer year);\n}\n",
    "src/main/java/com/example/demo/repository/TransactionLogRepository.java": "package com.example.demo.repository;\n\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Repository\npublic interface TransactionLogRepository extends JpaRepository<TransactionLog, Long> {\n    List<TransactionLog> findByUser(User user);\n    List<TransactionLog> findByUserAndTransactionDateBetween(User user, LocalDate start, LocalDate end);\n}\n",
    "src/main/java/com/example/demo/service/BudgetPlanService.java": "package com.example.demo.service;\n\nimport com.example.demo.model.BudgetPlan;\n\npublic interface BudgetPlanService {\n    BudgetPlan createBudgetPlan(Long userId, BudgetPlan plan);\n    BudgetPlan getBudgetPlan(Long userId, Integer month, Integer year);\n}\n",
    "src/main/java/com/example/demo/service/TransactionService.java": "package com.example.demo.service;\n\nimport com.example.demo.model.TransactionLog;\nimport java.util.List;\n\npublic interface TransactionService {\n    TransactionLog addTransaction(Long userId, TransactionLog log);\n    List<TransactionLog> getUserTransactions(Long userId);\n}\n",
    "src/main/java/com/example/demo/service/CategoryService.java": "package com.example.demo.service;\n\nimport com.example.demo.model.Category;\nimport java.util.List;\n\npublic interface CategoryService {\n    Category addCategory(Category category);\n    List<Category> getAllCategories();\n}\n",
    "src/main/java/com/example/demo/service/UserService.java": "package com.example.demo.service;\n\nimport com.example.demo.model.User;\n\npublic interface UserService {\n    User register(User user);\n    User findByEmail(String email);\n}\n",
    "src/main/java/com/example/demo/service/BudgetSummaryService.java": "package com.example.demo.service;\n\nimport com.example.demo.model.BudgetSummary;\n\npublic interface BudgetSummaryService {\n    BudgetSummary generateSummary(Long budgetPlanId);\n    BudgetSummary getSummary(Long budgetPlanId);\n}\n",
    "src/main/java/com/example/demo/service/impl/CategoryServiceImpl.java": "package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.Category;\nimport com.example.demo.repository.CategoryRepository;\nimport com.example.demo.service.CategoryService;\nimport org.springframework.stereotype.Service;\nimport java.util.List;\n\n@Service\npublic class CategoryServiceImpl implements CategoryService {\n\n    private final CategoryRepository categoryRepository;\n\n    public CategoryServiceImpl(CategoryRepository categoryRepository) {\n        this.categoryRepository = categoryRepository;\n    }\n\n    @Override\n    public Category addCategory(Category category) {\n        if (categoryRepository.existsByName(category.getName())) {\n            throw new BadRequestException(\"Category already exists\");\n        }\n        validateType(category.getType());\n        return categoryRepository.save(category);\n    }\n\n    @Override\n    public List<Category> getAllCategories() {\n        return categoryRepository.findAll();\n    }\n\n    private void validateType(String type) {\n        if (!Category.TYPE_INCOME.equals(type) && !Category.TYPE_EXPENSE.equals(type)) {\n            throw new BadRequestException(\"Invalid category type\");\n        }\n    }\n}\n",
    "src/main/java/com/example/demo/service/impl/UserServiceImpl.java": "package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.exception.ConflictException;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.UserService;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl implements UserService {\n\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n\n    public UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    @Override\n    public User register(User user) {\n        if (userRepository.existsByEmail(user.getEmail())) {\n            throw new BadRequestException(\"Email already exists\");\n        }\n\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        if (user.getRole() == null || user.getRole().isEmpty()) {\n            user.setRole(\"USER\");\n        }\n\n        return userRepository.save(user);\n    }\n\n    @Override\n    public User findByEmail(String email) {\n        return userRepository.findByEmail(email)\n                .orElseThrow(() -> new BadRequestException(\"User not found with email: \" + email));\n    }\n}\n",
    "src/main/java/com/example/demo/service/impl/BudgetPlanServiceImpl.java": "package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.BudgetPlanRepository;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.BudgetPlanService;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BudgetPlanServiceImpl implements BudgetPlanService {\n\n    private final BudgetPlanRepository budgetPlanRepository;\n    private final UserRepository userRepository;\n\n    public BudgetPlanServiceImpl(BudgetPlanRepository budgetPlanRepository, UserRepository userRepository) {\n        this.budgetPlanRepository = budgetPlanRepository;\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public BudgetPlan createBudgetPlan(Long userId, BudgetPlan plan) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException(\"User not found\"));\n\n        if (plan.getMonth() < 1 || plan.getMonth() > 12) {\n            throw new BadRequestException(\"Invalid month\");\n        }\n        if (plan.getIncomeTarget() < 0 || plan.getExpenseLimit() < 0) {\n            throw new BadRequestException(\"Targets must be non-negative\");\n        }\n\n        if (budgetPlanRepository.findByUserAndMonthAndYear(user, plan.getMonth(), plan.getYear()).isPresent()) {\n            throw new BadRequestException(\"Budget plan already exists for this period\");\n        }\n\n        plan.setUser(user);\n        return budgetPlanRepository.save(plan);\n    }\n\n    @Override\n    public BudgetPlan getBudgetPlan(Long userId, Integer month, Integer year) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException(\"User not found\"));\n        return budgetPlanRepository.findByUserAndMonthAndYear(user, month, year)\n                .orElseThrow(() -> new BadRequestException(\"Budget plan not found\"));\n    }\n}\n",
    "src/main/java/com/example/demo/service/impl/BudgetSummaryServiceImpl.java": "package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.BudgetSummary;\nimport com.example.demo.model.Category;\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.repository.BudgetPlanRepository;\nimport com.example.demo.repository.BudgetSummaryRepository;\nimport com.example.demo.repository.TransactionLogRepository;\nimport com.example.demo.service.BudgetSummaryService;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Service\npublic class BudgetSummaryServiceImpl implements BudgetSummaryService {\n\n    private final BudgetSummaryRepository budgetSummaryRepository;\n    private final BudgetPlanRepository budgetPlanRepository;\n    private final TransactionLogRepository transactionLogRepository;\n\n    public BudgetSummaryServiceImpl(BudgetSummaryRepository budgetSummaryRepository,\n                                    BudgetPlanRepository budgetPlanRepository,\n                                    TransactionLogRepository transactionLogRepository) {\n        this.budgetSummaryRepository = budgetSummaryRepository;\n        this.budgetPlanRepository = budgetPlanRepository;\n        this.transactionLogRepository = transactionLogRepository;\n    }\n\n    @Override\n    public BudgetSummary generateSummary(Long budgetPlanId) {\n        BudgetPlan plan = budgetPlanRepository.findById(budgetPlanId)\n                .orElseThrow(() -> new BadRequestException(\"Budget Plan not found\"));\n\n        LocalDate start = LocalDate.of(plan.getYear(), plan.getMonth(), 1);\n        LocalDate end = start.withDayOfMonth(start.lengthOfMonth());\n\n        List<TransactionLog> logs = transactionLogRepository.findByUserAndTransactionDateBetween(plan.getUser(), start, end);\n\n        double totalIncome = logs.stream()\n                .filter(l -> Category.TYPE_INCOME.equals(l.getCategory().getType()))\n                .mapToDouble(TransactionLog::getAmount)\n                .sum();\n\n        double totalExpense = logs.stream()\n                .filter(l -> Category.TYPE_EXPENSE.equals(l.getCategory().getType()))\n                .mapToDouble(TransactionLog::getAmount)\n                .sum();\n\n        BudgetSummary summary = budgetSummaryRepository.findByBudgetPlan(plan)\n                .orElse(new BudgetSummary());\n\n        summary.setBudgetPlan(plan);\n        summary.setTotalIncome(totalIncome);\n        summary.setTotalExpense(totalExpense);\n        summary.setStatus(totalExpense > plan.getExpenseLimit() ? BudgetSummary.STATUS_OVER_LIMIT : BudgetSummary.STATUS_UNDER_LIMIT);\n        \n        // If it's a new entity, generatedAt will be set by @PrePersist. \n        // If updating, we might want to update the timestamp or leave it?\n        // Spec says: \"Lifecycle method onCreate() initializes generatedAt when the entity is first persisted.\"\n        // It doesn't explicitly say to update it on re-generation. \n        // But usually \"generate\" implies fresh data. I will explicitly set it to now if it's an update, or let @PrePersist handle it for new.\n        // Actually, @PrePersist only runs on persist (insert). \n        // I will set it manually to ensure it reflects the latest generation time.\n        summary.setGeneratedAt(LocalDateTime.now());\n\n        return budgetSummaryRepository.save(summary);\n    }\n\n    @Override\n    public BudgetSummary getSummary(Long budgetPlanId) {\n        BudgetPlan plan = budgetPlanRepository.findById(budgetPlanId)\n                .orElseThrow(() -> new BadRequestException(\"Budget Plan not found\"));\n        return budgetSummaryRepository.findByBudgetPlan(plan)\n                .orElseThrow(() -> new BadRequestException(\"Summary not found\"));\n    }\n}\n",
    "src/main/java/com/example/demo/service/impl/TransactionServiceImpl.java": "package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.Category;\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.TransactionLogRepository;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.TransactionService;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Service\npublic class TransactionServiceImpl implements TransactionService {\n\n    private final TransactionLogRepository transactionLogRepository;\n    private final UserRepository userRepository;\n\n    public TransactionServiceImpl(TransactionLogRepository transactionLogRepository, UserRepository userRepository) {\n        this.transactionLogRepository = transactionLogRepository;\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public TransactionLog addTransaction(Long userId, TransactionLog log) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException(\"User not found\"));\n        \n        if (log.getAmount() <= 0) {\n            throw new BadRequestException(\"Amount must be greater than 0\");\n        }\n        if (log.getTransactionDate().isAfter(LocalDate.now())) {\n            throw new BadRequestException(\"Date cannot be in the future\");\n        }\n\n        log.setUser(user);\n        return transactionLogRepository.save(log);\n    }\n\n    @Override\n    public List<TransactionLog> getUserTransactions(Long userId) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException(\"User not found\"));\n        return transactionLogRepository.findByUser(user);\n    }\n}\n",
    "src/main/java/com/example/demo/model/BudgetSummary.java": "package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = \"budget_summaries\")\npublic class BudgetSummary {\n\n    public static final String STATUS_UNDER_LIMIT = \"UNDER_LIMIT\";\n    public static final String STATUS_OVER_LIMIT = \"OVER_LIMIT\";\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToOne\n    @JoinColumn(name = \"budget_plan_id\")\n    private BudgetPlan budgetPlan;\n\n    private Double totalIncome;\n\n    private Double totalExpense;\n\n    private String status;\n\n    private LocalDateTime generatedAt;\n\n    public BudgetSummary() {\n    }\n\n    public BudgetSummary(Long id, BudgetPlan budgetPlan, Double totalIncome, Double totalExpense, String status, LocalDateTime generatedAt) {\n        this.id = id;\n        this.budgetPlan = budgetPlan;\n        this.totalIncome = totalIncome;\n        this.totalExpense = totalExpense;\n        this.status = status;\n        this.generatedAt = generatedAt;\n    }\n\n    @PrePersist\n    public void onCreate() {\n        if (this.generatedAt == null) {\n            this.generatedAt = LocalDateTime.now();\n        }\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public BudgetPlan getBudgetPlan() {\n        return budgetPlan;\n    }\n\n    public void setBudgetPlan(BudgetPlan budgetPlan) {\n        this.budgetPlan = budgetPlan;\n    }\n\n    public Double getTotalIncome() {\n        return totalIncome;\n    }\n\n    public void setTotalIncome(Double totalIncome) {\n        this.totalIncome = totalIncome;\n    }\n\n    public Double getTotalExpense() {\n        return totalExpense;\n    }\n\n    public void setTotalExpense(Double totalExpense) {\n        this.totalExpense = totalExpense;\n    }\n\n    public String getStatus() {\n        return status;\n    }\n\n    public void setStatus(String status) {\n        this.status = status;\n    }\n\n    public LocalDateTime getGeneratedAt() {\n        return generatedAt;\n    }\n\n    public void setGeneratedAt(LocalDateTime generatedAt) {\n        this.generatedAt = generatedAt;\n    }\n}\n",
    "src/main/java/com/example/demo/model/Category.java": "package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.util.List;\n\n@Entity\n@Table(name = \"categories\")\npublic class Category {\n\n    public static final String TYPE_INCOME = \"INCOME\";\n    public static final String TYPE_EXPENSE = \"EXPENSE\";\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true)\n    private String name;\n\n    private String type;\n\n    @OneToMany(mappedBy = \"category\")\n    private List<TransactionLog> transactionLogs;\n\n    public Category() {\n    }\n\n    public Category(Long id, String name, String type) {\n        this.id = id;\n        this.name = name;\n        this.type = type;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public List<TransactionLog> getTransactionLogs() {\n        return transactionLogs;\n    }\n\n    public void setTransactionLogs(List<TransactionLog> transactionLogs) {\n        this.transactionLogs = transactionLogs;\n    }\n\n    public void validateType() {\n        if (!TYPE_INCOME.equals(type) && !TYPE_EXPENSE.equals(type)) {\n            throw new com.example.demo.exception.BadRequestException(\"Invalid category type\");\n        }\n    }\n}\n",
    "src/main/java/com/example/demo/model/BudgetPlan.java": "package com.example.demo.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = \"budget_plans\")\npublic class BudgetPlan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = \"user_id\")\n    private User user;\n\n    private Integer month;\n\n    @Column(name = \"`year`\")\n    private Integer year;\n\n    private Double incomeTarget;\n\n    private Double expenseLimit;\n\n    @OneToOne(mappedBy = \"budgetPlan\")\n    private BudgetSummary budgetSummary;\n\n    public BudgetPlan() {\n    }\n\n    public BudgetPlan(Long id, User user, Integer month, Integer year, Double incomeTarget, Double expenseLimit) {\n        this.id = id;\n        this.user = user;\n        this.month = month;\n        this.year = year;\n        this.incomeTarget = incomeTarget;\n        this.expenseLimit = expenseLimit;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Integer getMonth() {\n        return month;\n    }\n\n    public void setMonth(Integer month) {\n        this.month = month;\n    }\n\n    public Integer getYear() {\n        return year;\n    }\n\n    public void setYear(Integer year) {\n        this.year = year;\n    }\n\n    public Double getIncomeTarget() {\n        return incomeTarget;\n    }\n\n    public void setIncomeTarget(Double incomeTarget) {\n        this.incomeTarget = incomeTarget;\n    }\n\n    public Double getExpenseLimit() {\n        return expenseLimit;\n    }\n\n    public void setExpenseLimit(Double expenseLimit) {\n        this.expenseLimit = expenseLimit;\n    }\n\n    public BudgetSummary getBudgetSummary() {\n        return budgetSummary;\n    }\n\n    public void setBudgetSummary(BudgetSummary budgetSummary) {\n        this.budgetSummary = budgetSummary;\n    }\n\n    public void validate() {\n        if (month == null || month < 1 || month > 12) {\n            throw new com.example.demo.exception.BadRequestException(\"Invalid month\");\n        }\n    }\n}\n",
    "src/main/java/com/example/demo/model/TransactionLog.java": "package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDate;\n\n@Entity\n@Table(name = \"transaction_logs\")\npublic class TransactionLog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = \"user_id\")\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = \"category_id\")\n    private Category category;\n\n    private Double amount;\n\n    private String description;\n\n    private LocalDate transactionDate;\n\n    public TransactionLog() {\n    }\n\n    public TransactionLog(Long id, User user, Category category, Double amount, String description, LocalDate transactionDate) {\n        this.id = id;\n        this.user = user;\n        this.category = category;\n        this.amount = amount;\n        this.description = description;\n        this.transactionDate = transactionDate;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Category getCategory() {\n        return category;\n    }\n\n    public void setCategory(Category category) {\n        this.category = category;\n    }\n\n    public Double getAmount() {\n        return amount;\n    }\n\n    public void setAmount(Double amount) {\n        this.amount = amount;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public LocalDate getTransactionDate() {\n        return transactionDate;\n    }\n\n    public void setTransactionDate(LocalDate transactionDate) {\n        this.transactionDate = transactionDate;\n    }\n\n    public void validate() {\n        if (transactionDate != null && transactionDate.isAfter(LocalDate.now())) {\n            throw new com.example.demo.exception.BadRequestException(\"Date cannot be in the future\");\n        }\n    }\n}\n",
    "src/main/java/com/example/demo/model/User.java": "package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.util.List;\n\n@Entity\n@Table(name = \"users\")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    @Column(unique = true)\n    private String email;\n\n    private String password;\n\n    private String role; // \"USER\" or \"ADMIN\"\n\n    @OneToMany(mappedBy = \"user\")\n    private List<TransactionLog> transactionLogs;\n\n    @OneToMany(mappedBy = \"user\")\n    private List<BudgetPlan> budgetPlans;\n\n    public static final String ROLE_USER = \"USER\";\n\n    public User() {\n    }\n\n    public User(Long id, String name, String email, String password, String role) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.password = password;\n        this.role = role;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public List<TransactionLog> getTransactionLogs() {\n        return transactionLogs;\n    }\n\n    public void setTransactionLogs(List<TransactionLog> transactionLogs) {\n        this.transactionLogs = transactionLogs;\n    }\n\n    public List<BudgetPlan> getBudgetPlans() {\n        return budgetPlans;\n    }\n\n    public void setBudgetPlans(List<BudgetPlan> budgetPlans) {\n        this.budgetPlans = budgetPlans;\n    }\n}\n",
    "src/main/java/com/example/demo/config/SwaggerConfig.java": "package com.example.demo.config;\n\nimport io.swagger.v3.oas.models.Components;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Info;\nimport io.swagger.v3.oas.models.security.SecurityRequirement;\nimport io.swagger.v3.oas.models.security.SecurityScheme;\nimport io.swagger.v3.oas.models.servers.Server;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport java.util.List;\n\n@Configuration\npublic class SwaggerConfig {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        final String securitySchemeName = \"bearerAuth\";\n        return new OpenAPI()\n                .info(new Info().title(\"Personal Finance API\").version(\"1.0\"))\n                .addSecurityItem(new SecurityRequirement().addList(securitySchemeName))\n                .components(new Components()\n                        .addSecuritySchemes(securitySchemeName,\n                                new SecurityScheme()\n                                        .name(securitySchemeName)\n                                        .type(SecurityScheme.Type.HTTP)\n                                        .scheme(\"bearer\")\n                                        .bearerFormat(\"JWT\")))\n                // You need to change the port as per your server - already changed\n                .servers(List.of(\n                        new Server().url(\"https://9189.408procr.amypo.ai\")\n                ));\n    }\n}",
    "src/main/java/com/example/demo/config/SecurityConfig.java": "package com.example.demo.config;\n\nimport com.example.demo.security.CustomUserDetailsService;\nimport com.example.demo.security.JwtAuthenticationFilter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final CustomUserDetailsService userDetailsService;\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    public SecurityConfig(CustomUserDetailsService userDetailsService, JwtAuthenticationFilter jwtAuthenticationFilter) {\n        this.userDetailsService = userDetailsService;\n        this.jwtAuthenticationFilter = jwtAuthenticationFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .cors(org.springframework.security.config.Customizer.withDefaults())\n            .csrf(csrf -> csrf.disable())\n            .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .authorizeHttpRequests(auth -> auth\n                .requestMatchers(\"/api/auth/**\").permitAll()\n                .requestMatchers(\"/v3/api-docs/**\", \"/swagger-ui/**\", \"/swagger-ui.html\").permitAll()\n                .requestMatchers(\"/simple-hello\").permitAll() // Allow servlet\n                .anyRequest().authenticated()\n            );\n\n        http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public org.springframework.web.cors.CorsConfigurationSource corsConfigurationSource() {\n        org.springframework.web.cors.CorsConfiguration configuration = new org.springframework.web.cors.CorsConfiguration();\n        configuration.setAllowedOrigins(java.util.Arrays.asList(\"*\"));\n        configuration.setAllowedMethods(java.util.Arrays.asList(\"GET\", \"POST\", \"PUT\", \"DELETE\", \"OPTIONS\"));\n        configuration.setAllowedHeaders(java.util.Arrays.asList(\"*\"));\n        org.springframework.web.cors.UrlBasedCorsConfigurationSource source = new org.springframework.web.cors.UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", configuration);\n        return source;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n",
    "src/main/java/com/example/demo/exception/ConflictException.java": "package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.CONFLICT)\npublic class ConflictException extends RuntimeException {\n    public ConflictException(String message) {\n        super(message);\n    }\n}\n",
    "src/main/java/com/example/demo/exception/GlobalExceptionHandler.java": "package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.context.request.WebRequest;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(BadRequestException.class)\n    public ResponseEntity<?> handleBadRequestException(BadRequestException ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put(\"timestamp\", new Date());\n        body.put(\"status\", HttpStatus.BAD_REQUEST.value());\n        body.put(\"error\", \"Bad Request\");\n        body.put(\"message\", ex.getMessage());\n        body.put(\"path\", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.BAD_REQUEST);\n    }\n\n    @ExceptionHandler(ConflictException.class)\n    public ResponseEntity<?> handleConflictException(ConflictException ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put(\"timestamp\", new Date());\n        body.put(\"status\", HttpStatus.CONFLICT.value());\n        body.put(\"error\", \"Conflict\");\n        body.put(\"message\", ex.getMessage());\n        body.put(\"path\", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.CONFLICT);\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity<?> handleGlobalException(Exception ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put(\"timestamp\", new Date());\n        body.put(\"status\", HttpStatus.INTERNAL_SERVER_ERROR.value());\n        body.put(\"error\", \"Internal Server Error\");\n        body.put(\"message\", ex.getMessage());\n        body.put(\"path\", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n",
    "src/main/java/com/example/demo/exception/BadRequestException.java": "package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic class BadRequestException extends RuntimeException {\n    public BadRequestException(String message) {\n        super(message);\n    }\n}\n",
    "src/main/java/com/example/demo/dto/AuthResponse.java": "package com.example.demo.dto;\n\npublic class AuthResponse {\n    private String accessToken;\n    private String tokenType = \"Bearer\";\n\n    public AuthResponse(String accessToken) {\n        this.accessToken = accessToken;\n    }\n\n    public String getAccessToken() { return accessToken; }\n    public void setAccessToken(String accessToken) { this.accessToken = accessToken; }\n\n    public String getTokenType() { return tokenType; }\n    public void setTokenType(String tokenType) { this.tokenType = tokenType; }\n}\n",
    "src/main/java/com/example/demo/dto/LoginRequest.java": "package com.example.demo.dto;\n\npublic class LoginRequest {\n    private String email;\n    private String password;\n\n    public LoginRequest() {}\n\n    public LoginRequest(String email, String password) {\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getEmail() { return email; }\n    public void setEmail(String email) { this.email = email; }\n\n    public String getPassword() { return password; }\n    public void setPassword(String password) { this.password = password; }\n}\n",
    "src/main/java/com/example/demo/dto/RegisterRequest.java": "package com.example.demo.dto;\n\npublic class RegisterRequest {\n    private String name;\n    private String email;\n    private String password;\n\n    public RegisterRequest() {}\n\n    public RegisterRequest(String name, String email, String password) {\n        this.name = name;\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n\n    public String getEmail() { return email; }\n    public void setEmail(String email) { this.email = email; }\n\n    public String getPassword() { return password; }\n    public void setPassword(String password) { this.password = password; }\n}\n",
    "src/main/java/com/example/demo/controller/CategoryController.java": "package com.example.demo.controller;\n\nimport com.example.demo.model.Category;\nimport com.example.demo.service.CategoryService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/categories\")\npublic class CategoryController {\n\n    private final CategoryService categoryService;\n\n    public CategoryController(CategoryService categoryService) {\n        this.categoryService = categoryService;\n    }\n\n    @PostMapping\n    public ResponseEntity<Category> addCategory(@RequestBody Category category) {\n        return ResponseEntity.ok(categoryService.addCategory(category));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<Category>> getAllCategories() {\n        return ResponseEntity.ok(categoryService.getAllCategories());\n    }\n}\n",
    "src/main/java/com/example/demo/controller/TransactionController.java": "package com.example.demo.controller;\n\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport com.example.demo.service.TransactionService;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/transactions\")\npublic class TransactionController {\n\n    private final TransactionService transactionService;\n    private final UserService userService;\n\n    public TransactionController(TransactionService transactionService, UserService userService) {\n        this.transactionService = transactionService;\n        this.userService = userService;\n    }\n\n    @PostMapping\n    public ResponseEntity<TransactionLog> addTransaction(@RequestBody TransactionLog log, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(transactionService.addTransaction(user.getId(), log));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<TransactionLog>> getUserTransactions(Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(transactionService.getUserTransactions(user.getId()));\n    }\n}\n",
    "src/main/java/com/example/demo/controller/BudgetPlanController.java": "package com.example.demo.controller;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport com.example.demo.service.BudgetPlanService;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\"/api/budget-plans\")\npublic class BudgetPlanController {\n\n    private final BudgetPlanService budgetPlanService;\n    private final UserService userService;\n\n    public BudgetPlanController(BudgetPlanService budgetPlanService, UserService userService) {\n        this.budgetPlanService = budgetPlanService;\n        this.userService = userService;\n    }\n\n    @PostMapping\n    public ResponseEntity<BudgetPlan> createBudgetPlan(@RequestBody BudgetPlan plan, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(budgetPlanService.createBudgetPlan(user.getId(), plan));\n    }\n\n    @GetMapping\n    public ResponseEntity<BudgetPlan> getBudgetPlan(@RequestParam Integer month, @RequestParam Integer year, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(budgetPlanService.getBudgetPlan(user.getId(), month, year));\n    }\n}\n",
    "src/main/java/com/example/demo/controller/BudgetSummaryController.java": "package com.example.demo.controller;\n\nimport com.example.demo.model.BudgetSummary;\nimport com.example.demo.service.BudgetSummaryService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\"/api/budget-summaries\")\npublic class BudgetSummaryController {\n\n    private final BudgetSummaryService budgetSummaryService;\n\n    public BudgetSummaryController(BudgetSummaryService budgetSummaryService) {\n        this.budgetSummaryService = budgetSummaryService;\n    }\n\n    @PostMapping(\"/generate/{planId}\")\n    public ResponseEntity<BudgetSummary> generateSummary(@PathVariable Long planId) {\n        return ResponseEntity.ok(budgetSummaryService.generateSummary(planId));\n    }\n\n    @GetMapping(\"/{planId}\")\n    public ResponseEntity<BudgetSummary> getSummary(@PathVariable Long planId) {\n        return ResponseEntity.ok(budgetSummaryService.getSummary(planId));\n    }\n}\n",
    "src/main/java/com/example/demo/controller/AuthController.java": "package com.example.demo.controller;\n\nimport com.example.demo.dto.AuthResponse;\nimport com.example.demo.dto.LoginRequest;\nimport com.example.demo.dto.RegisterRequest;\nimport com.example.demo.model.User;\nimport com.example.demo.security.JwtTokenProvider;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api/auth\")\npublic class AuthController {\n\n    private final AuthenticationManager authenticationManager;\n    private final UserService userService;\n    private final JwtTokenProvider tokenProvider;\n\n    public AuthController(AuthenticationManager authenticationManager, UserService userService, JwtTokenProvider tokenProvider) {\n        this.authenticationManager = authenticationManager;\n        this.userService = userService;\n        this.tokenProvider = tokenProvider;\n    }\n\n    @PostMapping(\"/register\")\n    public ResponseEntity<User> registerUser(@RequestBody RegisterRequest registerRequest) {\n        User user = new User();\n        user.setName(registerRequest.getName());\n        user.setEmail(registerRequest.getEmail());\n        user.setPassword(registerRequest.getPassword());\n        \n        return ResponseEntity.ok(userService.register(user));\n    }\n\n    @PostMapping(\"/login\")\n    public ResponseEntity<AuthResponse> authenticateUser(@RequestBody LoginRequest loginRequest) {\n        Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(\n                        loginRequest.getEmail(),\n                        loginRequest.getPassword()\n                )\n        );\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        String jwt = tokenProvider.generateToken(authentication);\n        return ResponseEntity.ok(new AuthResponse(jwt));\n    }\n}\n",
    "src/main/java/com/example/demo/servlet/SimpleHelloServlet.java": "package com.example.demo.servlet;\n\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@WebServlet(urlPatterns = \"/simple-hello\")\npublic class SimpleHelloServlet extends HttpServlet {\n    @Override\n    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        resp.setContentType(\"text/plain\");\n        resp.getWriter().write(\"Hello from Simple Servlet\");\n    }\n\n    @Override\n    public String getServletInfo() {\n        return \"SimpleHelloServlet\";\n    }\n}\n",
    "src/test/java/com/example/demo/PersonalFinanceBudgetPlannerTest.java": "package com.example.demo;\n\nimport com.example.demo.dto.RegisterRequest;\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.exception.ConflictException;\nimport com.example.demo.model.*;\nimport com.example.demo.repository.*;\nimport com.example.demo.security.CustomUserDetailsService;\nimport com.example.demo.security.JwtTokenProvider;\nimport com.example.demo.service.*;\nimport com.example.demo.service.impl.*;\nimport com.example.demo.servlet.SimpleHelloServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.mock.web.MockHttpServletRequest;\nimport org.springframework.mock.web.MockHttpServletResponse;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.testng.Assert;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.Listeners;\nimport org.testng.annotations.Test;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.YearMonth;\nimport java.util.*;\n\nimport static org.mockito.ArgumentMatchers.*;\nimport static org.mockito.Mockito.when;\n\n@Listeners(TestResultListener.class)\npublic class PersonalFinanceBudgetPlannerTest {\n\n    @Mock private UserRepository userRepository;\n    @Mock private CategoryRepository categoryRepository;\n    @Mock private TransactionLogRepository transactionLogRepository;\n    @Mock private BudgetPlanRepository budgetPlanRepository;\n    @Mock private BudgetSummaryRepository budgetSummaryRepository;\n    @Mock private PasswordEncoder passwordEncoder;\n    @Mock private AuthenticationManager authenticationManager;\n    @Mock private Authentication authentication;\n    @Mock private CustomUserDetailsService customUserDetailsService;\n\n    private UserService userService;\n    private CategoryService categoryService;\n    private TransactionService transactionService;\n    private BudgetPlanService budgetPlanService;\n    private BudgetSummaryService budgetSummaryService;\n    private JwtTokenProvider jwtTokenProvider;\n\n    @BeforeClass\n    public void init() {\n        MockitoAnnotations.openMocks(this);\n        jwtTokenProvider = new JwtTokenProvider(\n                \"MySuperSecretJwtKeyForBudgetPlanner123456\", 3600000L);\n        userService = new UserServiceImpl(userRepository, passwordEncoder);\n        categoryService = new CategoryServiceImpl(categoryRepository);\n        transactionService = new TransactionServiceImpl(transactionLogRepository, userRepository);\n        budgetPlanService = new BudgetPlanServiceImpl(budgetPlanRepository, userRepository);\n        budgetSummaryService = new BudgetSummaryServiceImpl(\n                budgetSummaryRepository, budgetPlanRepository, transactionLogRepository);\n    }\n\n    // 1) Servlet tests (8)\n    @Test(groups = \"servlet\", priority = 1)\n    public void t1_servletHello() throws Exception {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        MockHttpServletRequest rq = new MockHttpServletRequest(\"GET\", \"/hello-servlet\");\n        MockHttpServletResponse rs = new MockHttpServletResponse();\n        s.doGet(rq, rs);\n        Assert.assertEquals(rs.getContentAsString(), \"Hello from Simple Servlet\");\n    }\n\n    @Test(groups = \"servlet\", priority = 2)\n    public void t2_servletStatus200() throws Exception {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        MockHttpServletRequest rq = new MockHttpServletRequest(\"GET\", \"/hello-servlet\");\n        MockHttpServletResponse rs = new MockHttpServletResponse();\n        s.doGet(rq, rs);\n        Assert.assertEquals(rs.getStatus(), 200);\n    }\n\n    @Test(groups = \"servlet\", priority = 3)\n    public void t3_servletContentType() throws Exception {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        MockHttpServletRequest rq = new MockHttpServletRequest(\"GET\", \"/hello-servlet\");\n        MockHttpServletResponse rs = new MockHttpServletResponse();\n        s.doGet(rq, rs);\n        Assert.assertEquals(rs.getContentType(), \"text/plain\");\n    }\n\n    @Test(groups = \"servlet\", priority = 4)\n    public void t4_servletInfo() {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        Assert.assertTrue(s.getServletInfo().contains(\"SimpleHelloServlet\"));\n    }\n\n    @Test(groups = \"servlet\", priority = 5)\n    public void t5_servletMultipleCalls() throws Exception {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        for (int i = 0; i < 3; i++) {\n            MockHttpServletRequest rq = new MockHttpServletRequest(\"GET\", \"/hello-servlet\");\n            MockHttpServletResponse rs = new MockHttpServletResponse();\n            s.doGet(rq, rs);\n            Assert.assertEquals(rs.getContentAsString(), \"Hello from Simple Servlet\");\n        }\n    }\n\n    @Test(groups = \"servlet\", priority = 6)\n    public void t6_servletNotNull() {\n        Assert.assertNotNull(new SimpleHelloServlet());\n    }\n\n    @Test(groups = \"servlet\", priority = 7)\n    public void t7_servletUrlPatternLogical() {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        Assert.assertNotNull(s);\n    }\n\n    @Test(groups = \"servlet\", priority = 8)\n    public void t8_servletNoExceptionOnPost() throws Exception {\n        SimpleHelloServlet s = new SimpleHelloServlet();\n        HttpServletRequest rq = new MockHttpServletRequest(\"POST\", \"/hello-servlet\");\n        HttpServletResponse rs = new MockHttpServletResponse();\n        s.service(rq, rs);\n        int status = ((MockHttpServletResponse) rs).getStatus();\n        Assert.assertTrue(status == 200 || status == 405);\n    }\n\n    // 2) CRUD-style tests (user/category/transaction/budget) (8)\n    @Test(groups = \"crud\", priority = 9)\n    public void t9_registerUser() {\n        RegisterRequest req = new RegisterRequest(\"John\", \"john@example.com\", \"p\");\n        when(userRepository.existsByEmail(\"john@example.com\")).thenReturn(false);\n        when(passwordEncoder.encode(\"p\")).thenReturn(\"enc\");\n        when(userRepository.save(any(User.class))).thenAnswer(inv -> {\n            User u = inv.getArgument(0);\n            u.setId(1L);\n            return u;\n        });\n        User u = new User(null, req.getName(), req.getEmail(), req.getPassword(), User.ROLE_USER);\n        User saved = userService.register(u);\n        Assert.assertEquals(saved.getId(), Long.valueOf(1L));\n    }\n\n    @Test(groups = \"crud\", priority = 10, expectedExceptions = BadRequestException.class)\n    public void t10_registerDuplicateEmail() {\n        when(userRepository.existsByEmail(\"x@example.com\")).thenReturn(true);\n        User u = new User(null, \"X\", \"x@example.com\", \"p\", User.ROLE_USER);\n        userService.register(u);\n    }\n\n    @Test(groups = \"crud\", priority = 11)\n    public void t11_addCategory() {\n        Category cat = new Category(null, \"Salary\", Category.TYPE_INCOME);\n        when(categoryRepository.existsByName(\"Salary\")).thenReturn(false);\n        when(categoryRepository.save(any(Category.class))).thenAnswer(inv -> {\n            Category c = inv.getArgument(0);\n            c.setId(10L);\n            return c;\n        });\n        Category saved = categoryService.addCategory(cat);\n        Assert.assertEquals(saved.getId(), Long.valueOf(10L));\n    }\n\n    @Test(groups = \"crud\", priority = 12, expectedExceptions = BadRequestException.class)\n    public void t12_addDuplicateCategory() {\n        Category cat = new Category(null, \"Food\", Category.TYPE_EXPENSE);\n        when(categoryRepository.existsByName(\"Food\")).thenReturn(true);\n        categoryService.addCategory(cat);\n    }\n\n    @Test(groups = \"crud\", priority = 13)\n    public void t13_addTransaction() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        Category c = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        TransactionLog log = new TransactionLog(null, u, c, 200.0, \"Dinner\",\n                LocalDate.of(2025, 1, 10));\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(transactionLogRepository.save(any(TransactionLog.class))).thenAnswer(inv -> {\n            TransactionLog t = inv.getArgument(0);\n            t.setId(100L);\n            return t;\n        });\n        TransactionLog saved = transactionService.addTransaction(1L, log);\n        Assert.assertEquals(saved.getId(), Long.valueOf(100L));\n    }\n\n    @Test(groups = \"crud\", priority = 14)\n    public void t14_createBudgetPlan() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        BudgetPlan plan = new BudgetPlan(null, u, 1, 2025, 50000.0, 20000.0);\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(budgetPlanRepository.findByUserAndMonthAndYear(u, 1, 2025))\n                .thenReturn(Optional.empty());\n        when(budgetPlanRepository.save(any(BudgetPlan.class))).thenAnswer(inv -> {\n            BudgetPlan p = inv.getArgument(0);\n            p.setId(50L);\n            return p;\n        });\n        BudgetPlan saved = budgetPlanService.createBudgetPlan(1L, plan);\n        Assert.assertEquals(saved.getId(), Long.valueOf(50L));\n    }\n\n    @Test(groups = \"crud\", priority = 15, expectedExceptions = BadRequestException.class)\n    public void t15_duplicateBudgetPlan() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        BudgetPlan plan = new BudgetPlan(null, u, 1, 2025, 50000.0, 20000.0);\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(budgetPlanRepository.findByUserAndMonthAndYear(u, 1, 2025))\n                .thenReturn(Optional.of(plan));\n        budgetPlanService.createBudgetPlan(1L, plan);\n    }\n\n    @Test(groups = \"crud\", priority = 16)\n    public void t16_getUserTransactions() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        TransactionLog t1 = new TransactionLog(1L, u, new Category(1L, \"Food\", Category.TYPE_EXPENSE),\n                100.0, \"Lunch\", LocalDate.now());\n        TransactionLog t2 = new TransactionLog(2L, u, new Category(2L, \"Salary\", Category.TYPE_INCOME),\n                2000.0, \"Salary\", LocalDate.now());\n        when(userRepository.findById(1L)).thenReturn(Optional.of(u));\n        when(transactionLogRepository.findByUser(u)).thenReturn(Arrays.asList(t1, t2));\n        Assert.assertEquals(transactionService.getUserTransactions(1L).size(), 2);\n    }\n\n    // 3) DI & IoC tests (8)\n    @Test(groups = \"di\", priority = 17)\n    public void t17_userServiceNotNull() { Assert.assertNotNull(userService); }\n\n    @Test(groups = \"di\", priority = 18)\n    public void t18_categoryServiceNotNull() { Assert.assertNotNull(categoryService); }\n\n    @Test(groups = \"di\", priority = 19)\n    public void t19_transactionServiceNotNull() { Assert.assertNotNull(transactionService); }\n\n    @Test(groups = \"di\", priority = 20)\n    public void t20_budgetPlanServiceNotNull() { Assert.assertNotNull(budgetPlanService); }\n\n    @Test(groups = \"di\", priority = 21)\n    public void t21_budgetSummaryServiceNotNull() { Assert.assertNotNull(budgetSummaryService); }\n\n    @Test(groups = \"di\", priority = 22)\n    public void t22_passwordEncoderMockNotNull() { Assert.assertNotNull(passwordEncoder); }\n\n    @Test(groups = \"di\", priority = 23)\n    public void t23_jwtProviderNotNull() { Assert.assertNotNull(jwtTokenProvider); }\n\n    @Test(groups = \"di\", priority = 24)\n    public void t24_repositoriesNotNull() { Assert.assertNotNull(userRepository); }\n\n    // 4) Hibernate-style tests (8)\n    @Test(groups = \"hibernate\", priority = 25)\n    public void t25_userDefaultRole() {\n        User u = new User();\n        u.setRole(User.ROLE_USER);\n        Assert.assertEquals(u.getRole(), User.ROLE_USER);\n    }\n\n    @Test(groups = \"hibernate\", priority = 26)\n    public void t26_transactionValidationPositiveAmount() {\n        TransactionLog log = new TransactionLog();\n        log.setAmount(100.0);\n        log.setTransactionDate(LocalDate.now());\n        log.validate();\n        Assert.assertEquals(log.getAmount(), 100.0);\n    }\n\n    @Test(groups = \"hibernate\", priority = 27, expectedExceptions = BadRequestException.class)\n    public void t27_transactionFutureDateInvalid() {\n        TransactionLog log = new TransactionLog();\n        log.setAmount(100.0);\n        log.setTransactionDate(LocalDate.now().plusDays(1));\n        log.validate();\n    }\n\n    @Test(groups = \"hibernate\", priority = 28)\n    public void t28_budgetPlanMonthValidation() {\n        BudgetPlan plan = new BudgetPlan(null, null, 5, 2025, 1000.0, 500.0);\n        plan.validate();\n        Assert.assertEquals(plan.getMonth(), Integer.valueOf(5));\n    }\n\n    @Test(groups = \"hibernate\", priority = 29, expectedExceptions = BadRequestException.class)\n    public void t29_budgetPlanInvalidMonth() {\n        BudgetPlan plan = new BudgetPlan(null, null, 13, 2025, 1000.0, 500.0);\n        plan.validate();\n    }\n\n    @Test(groups = \"hibernate\", priority = 30)\n    public void t30_budgetSummaryOnCreate() {\n        BudgetSummary summary = new BudgetSummary();\n        summary.setBudgetPlan(new BudgetPlan());\n        summary.onCreate();\n        Assert.assertNotNull(summary.getGeneratedAt());\n    }\n\n    @Test(groups = \"hibernate\", priority = 31)\n    public void t31_categoryTypeValidation() {\n        Category cat = new Category(null, \"Gift\", Category.TYPE_EXPENSE);\n        cat.validateType();\n        Assert.assertEquals(cat.getType(), Category.TYPE_EXPENSE);\n    }\n\n    @Test(groups = \"hibernate\", priority = 32, expectedExceptions = BadRequestException.class)\n    public void t32_categoryTypeInvalid() {\n        Category cat = new Category(null, \"X\", \"OTHER\");\n        cat.validateType();\n    }\n\n    // 5) JPA mapping & normalization-style tests (7)\n    @Test(groups = \"jpa-mapping\", priority = 33)\n    public void t33_manyToOneUserTransactions() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        TransactionLog t = new TransactionLog(1L, u,\n                new Category(1L, \"Food\", Category.TYPE_EXPENSE),\n                100.0, \"Lunch\", LocalDate.now());\n        Assert.assertEquals(t.getUser().getId(), u.getId());\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 34)\n    public void t34_manyToOneUserBudgetPlan() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        BudgetPlan plan = new BudgetPlan(1L, u, 1, 2025, 1000.0, 500.0);\n        Assert.assertEquals(plan.getUser().getEmail(), \"u@e.com\");\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 35)\n    public void t35_oneToOneBudgetSummaryPlan() {\n        BudgetPlan plan = new BudgetPlan(1L, new User(), 1, 2025, 1000.0, 500.0);\n        BudgetSummary summary = new BudgetSummary(1L, plan, 500.0, 200.0,\n                BudgetSummary.STATUS_UNDER_LIMIT, LocalDateTime.now());\n        Assert.assertEquals(summary.getBudgetPlan().getId(), plan.getId());\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 36)\n    public void t36_1NF_categoryNameNotNull() {\n        Category cat = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        Assert.assertNotNull(cat.getName());\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 37)\n    public void t37_2NF_budgetPlanDependsOnId() {\n        BudgetPlan plan = new BudgetPlan(1L, new User(), 1, 2025, 1000.0, 500.0);\n        Assert.assertEquals(plan.getId(), Long.valueOf(1L));\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 38)\n    public void t38_3NF_budgetSummaryNoTransitive() {\n        BudgetSummary summary = new BudgetSummary();\n        summary.setStatus(BudgetSummary.STATUS_UNDER_LIMIT);\n        Assert.assertEquals(summary.getStatus(), BudgetSummary.STATUS_UNDER_LIMIT);\n    }\n\n    @Test(groups = \"jpa-mapping\", priority = 39)\n    public void t39_normalizedTransactionLog() {\n        TransactionLog log = new TransactionLog(1L, new User(), new Category(),\n                100.0, \"Note\", LocalDate.now());\n        Assert.assertEquals(log.getId(), Long.valueOf(1L));\n    }\n\n    // 6) Many-to-Many logical tests (7) - using user & categories via transactions\n    @Test(groups = \"many-to-many\", priority = 40)\n    public void t40_userMultipleCategoriesThroughTransactions() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        Category c1 = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        Category c2 = new Category(2L, \"Salary\", Category.TYPE_INCOME);\n        TransactionLog t1 = new TransactionLog(1L, u, c1, 100.0, \"Lunch\", LocalDate.now());\n        TransactionLog t2 = new TransactionLog(2L, u, c2, 2000.0, \"Salary\", LocalDate.now());\n        Assert.assertEquals(Arrays.asList(t1, t2).size(), 2);\n    }\n\n    @Test(groups = \"many-to-many\", priority = 41)\n    public void t41_categoryUsedByMultipleUsers() {\n        Category c = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        User u1 = new User(1L, \"U1\", \"u1@e.com\", \"p\", User.ROLE_USER);\n        User u2 = new User(2L, \"U2\", \"u2@e.com\", \"p\", User.ROLE_USER);\n        TransactionLog t1 = new TransactionLog(1L, u1, c, 100.0, \"L1\", LocalDate.now());\n        TransactionLog t2 = new TransactionLog(2L, u2, c, 150.0, \"L2\", LocalDate.now());\n        Assert.assertEquals(new HashSet<>(Arrays.asList(t1.getUser(), t2.getUser())).size(), 2);\n    }\n\n    @Test(groups = \"many-to-many\", priority = 42)\n    public void t42_noDuplicateTransactionIds() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        Category c = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        TransactionLog t1 = new TransactionLog(1L, u, c, 100.0, \"L1\", LocalDate.now());\n        TransactionLog t2 = new TransactionLog(2L, u, c, 120.0, \"L2\", LocalDate.now());\n        Assert.assertNotEquals(t1.getId(), t2.getId());\n    }\n\n    @Test(groups = \"many-to-many\", priority = 43)\n    public void t43_logicalManyToManyCardinality() {\n        User u1 = new User(1L, \"U1\", \"u1@e.com\", \"p\", User.ROLE_USER);\n        User u2 = new User(2L, \"U2\", \"u2@e.com\", \"p\", User.ROLE_USER);\n        Category c1 = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        Category c2 = new Category(2L, \"Salary\", Category.TYPE_INCOME);\n        TransactionLog t1 = new TransactionLog(1L, u1, c1, 100.0, \"L1\", LocalDate.now());\n        TransactionLog t2 = new TransactionLog(2L, u1, c2, 2000.0, \"L2\", LocalDate.now());\n        TransactionLog t3 = new TransactionLog(3L, u2, c1, 150.0, \"L3\", LocalDate.now());\n        Assert.assertEquals(Arrays.asList(t1, t2, t3).size(), 3);\n    }\n\n    @Test(groups = \"many-to-many\", priority = 44)\n    public void t44_edgeNoTransactions() {\n        Assert.assertTrue(Collections.<TransactionLog>emptyList().isEmpty());\n    }\n\n    @Test(groups = \"many-to-many\", priority = 45)\n    public void t45_edgeSingleTransaction() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        Category c = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        TransactionLog t = new TransactionLog(1L, u, c, 100.0, \"L1\", LocalDate.now());\n        Assert.assertEquals(t.getUser().getId(), Long.valueOf(1L));\n    }\n\n    @Test(groups = \"many-to-many\", priority = 46)\n    public void t46_joinEntityNotNull() {\n        TransactionLog t = new TransactionLog(1L, new User(), new Category(),\n                100.0, \"L1\", LocalDate.now());\n        Assert.assertNotNull(t.getCategory());\n    }\n\n    // 7) JWT security tests (7)\n    @Test(groups = \"jwt-security\", priority = 47)\n    public void t47_jwtContainsClaims() {\n        UserDetails ud = org.springframework.security.core.userdetails.User\n                .withUsername(\"user@e.com\").password(\"p\").roles(\"USER\").build();\n        when(authentication.getPrincipal()).thenReturn(ud);\n        String token = jwtTokenProvider.generateToken(authentication,\n                1L, \"user@e.com\", \"USER\");\n        Assert.assertEquals(jwtTokenProvider.getUserIdFromToken(token), Long.valueOf(1L));\n        Assert.assertEquals(jwtTokenProvider.getEmailFromToken(token), \"user@e.com\");\n        Assert.assertEquals(jwtTokenProvider.getRoleFromToken(token), \"USER\");\n    }\n\n    @Test(groups = \"jwt-security\", priority = 48)\n    public void t48_jwtInvalidTokenFalse() {\n        Assert.assertFalse(jwtTokenProvider.validateToken(\"x.y.z\"));\n    }\n\n    @Test(groups = \"jwt-security\", priority = 49)\n    public void t49_jwtValidTokenTrue() {\n        UserDetails ud = org.springframework.security.core.userdetails.User\n                .withUsername(\"t@e.com\").password(\"p\").roles(\"USER\").build();\n        when(authentication.getPrincipal()).thenReturn(ud);\n        String token = jwtTokenProvider.generateToken(authentication,\n                2L, \"t@e.com\", \"USER\");\n        Assert.assertTrue(jwtTokenProvider.validateToken(token));\n    }\n\n    @Test(groups = \"jwt-security\", priority = 50)\n    public void t50_jwtUserIdFallbackSubject() {\n        String raw = io.jsonwebtoken.Jwts.builder()\n                .setSubject(\"10\")\n                .signWith(io.jsonwebtoken.security.Keys.hmacShaKeyFor(\n                                \"MySuperSecretJwtKeyForBudgetPlanner123456\".getBytes()),\n                        io.jsonwebtoken.SignatureAlgorithm.HS256)\n                .compact();\n        Assert.assertEquals(jwtTokenProvider.getUserIdFromToken(raw), Long.valueOf(10L));\n    }\n\n    @Test(groups = \"jwt-security\", priority = 51)\n    public void t51_jwtRoleNoPrefixChange() {\n        UserDetails ud = org.springframework.security.core.userdetails.User\n                .withUsername(\"r@e.com\").password(\"p\").roles(\"USER\").build();\n        when(authentication.getPrincipal()).thenReturn(ud);\n        String token = jwtTokenProvider.generateToken(authentication,\n                3L, \"r@e.com\", \"USER\");\n        Assert.assertEquals(jwtTokenProvider.getRoleFromToken(token), \"USER\");\n    }\n\n    @Test(groups = \"jwt-security\", priority = 52)\n    public void t52_jwtTokenNotNull() {\n        UserDetails ud = org.springframework.security.core.userdetails.User\n                .withUsername(\"x@e.com\").password(\"p\").roles(\"USER\").build();\n        when(authentication.getPrincipal()).thenReturn(ud);\n        String token = jwtTokenProvider.generateToken(authentication,\n                4L, \"x@e.com\", \"USER\");\n        Assert.assertNotNull(token);\n    }\n\n    @Test(groups = \"jwt-security\", priority = 53)\n    public void t53_jwtDifferentIdsProduceDifferentTokens() {\n        UserDetails ud = org.springframework.security.core.userdetails.User\n                .withUsername(\"x@e.com\").password(\"p\").roles(\"USER\").build();\n        when(authentication.getPrincipal()).thenReturn(ud);\n        String t1 = jwtTokenProvider.generateToken(authentication,\n                5L, \"x@e.com\", \"USER\");\n        String t2 = jwtTokenProvider.generateToken(authentication,\n                6L, \"x@e.com\", \"USER\");\n        Assert.assertNotEquals(t1, t2);\n    }\n\n    // 8) HQL/HCQL-style query tests (7)\n    @Test(groups = \"hql-hcql\", priority = 54)\n    public void t54_queryTransactionsByUserAndMonth() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        Category cat = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        YearMonth ym = YearMonth.of(2025, 1);\n        LocalDate start = ym.atDay(1);\n        LocalDate end = ym.atEndOfMonth();\n        TransactionLog t = new TransactionLog(1L, u, cat, 100.0, \"L\", LocalDate.now());\n        when(transactionLogRepository.findByUserAndTransactionDateBetween(u, start, end))\n                .thenReturn(List.of(t));\n        Assert.assertEquals(transactionLogRepository\n                .findByUserAndTransactionDateBetween(u, start, end).size(), 1);\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 55)\n    public void t55_queryNoTransactionsRange() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        YearMonth ym = YearMonth.of(2025, 1);\n        LocalDate start = ym.atDay(1);\n        LocalDate end = ym.atEndOfMonth();\n        when(transactionLogRepository.findByUserAndTransactionDateBetween(u, start, end))\n                .thenReturn(Collections.emptyList());\n        Assert.assertTrue(transactionLogRepository\n                .findByUserAndTransactionDateBetween(u, start, end).isEmpty());\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 56)\n    public void t56_queryBudgetPlanByUserMonthYear() {\n        User u = new User(1L, \"U\", \"u@e.com\", \"p\", User.ROLE_USER);\n        BudgetPlan plan = new BudgetPlan(1L, u, 1, 2025, 1000.0, 500.0);\n        when(budgetPlanRepository.findByUserAndMonthAndYear(u, 1, 2025))\n                .thenReturn(Optional.of(plan));\n        Assert.assertTrue(budgetPlanRepository\n                .findByUserAndMonthAndYear(u, 1, 2025).isPresent());\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 57)\n    public void t57_querySummaryByBudgetPlan() {\n        BudgetPlan plan = new BudgetPlan(1L, new User(), 1, 2025, 1000.0, 500.0);\n        BudgetSummary summary = new BudgetSummary(1L, plan, 1000.0, 400.0,\n                BudgetSummary.STATUS_UNDER_LIMIT, LocalDateTime.now());\n        when(budgetSummaryRepository.findByBudgetPlan(plan)).thenReturn(Optional.of(summary));\n        Assert.assertTrue(budgetSummaryRepository.findByBudgetPlan(plan).isPresent());\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 58)\n    public void t58_queryCategoriesList() {\n        Category c1 = new Category(1L, \"Food\", Category.TYPE_EXPENSE);\n        Category c2 = new Category(2L, \"Salary\", Category.TYPE_INCOME);\n        when(categoryRepository.findAll()).thenReturn(Arrays.asList(c1, c2));\n        Assert.assertEquals(categoryService.getAllCategories().size(), 2);\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 59)\n    public void t59_queryCategoriesEmpty() {\n        when(categoryRepository.findAll()).thenReturn(Collections.emptyList());\n        Assert.assertTrue(categoryService.getAllCategories().isEmpty());\n    }\n\n    @Test(groups = \"hql-hcql\", priority = 60)\n    public void t60_queryEdgeNullListsHandled() {\n        when(categoryRepository.findAll()).thenReturn(Collections.emptyList());\n        Assert.assertNotNull(categoryService.getAllCategories());\n    }\n}\n",
    "src/test/java/com/example/demo/TestResultListener.java": "package com.example.demo;\n \nimport org.testng.ITestListener;\nimport org.testng.ITestResult;\n \npublic class TestResultListener implements ITestListener {\n \n    @Override\n    public void onTestSuccess(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + \" - PASS\");\n    }\n \n    @Override\n    public void onTestFailure(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + \" - FAIL\");\n    }\n \n    @Override\n    public void onTestSkipped(ITestResult result) {\n        System.out.println(result.getMethod().getMethodName() + \" - SKIP\");\n    }\n}"
}

def recreate_project():
    print("Starting project recreation...")
    for file_path, content in FILES.items():
        # Handle path separators for the current OS
        file_path = os.path.normpath(file_path)
        dir_name = os.path.dirname(file_path)
        
        if dir_name:
            os.makedirs(dir_name, exist_ok=True)
        
        try:
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(content)
            print(f"Created: {file_path}")
        except Exception as e:
            print(f"Error creating {file_path}: {e}")
            
    print("-" * 50)
    print("Project recreated successfully!")

if __name__ == "__main__":
    recreate_project()
